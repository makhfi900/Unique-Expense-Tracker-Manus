#!/bin/sh
# TDD Pre-commit Hook - Ensures all tests pass before commits

echo "ğŸ§ª Running TDD test suite before commit..."

# Change to project root
cd "$(git rev-parse --show-toplevel)"

# Run TDD tests with fail-fast
node run-tdd-tests.js

# Check exit code
if [ $? -ne 0 ]; then
    echo ""
    echo "âŒ TDD TESTS FAILED - COMMIT BLOCKED"
    echo "ğŸ”§ Fix failing tests before committing"
    echo "ğŸ’¡ Run 'node run-tdd-tests.js' to see detailed failures"
    echo ""
    exit 1
fi

echo ""
echo "âœ… ALL TDD TESTS PASS - COMMIT ALLOWED"
echo "ğŸš€ Your changes are protected by comprehensive test coverage"
echo ""

exit 0